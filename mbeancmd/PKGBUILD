# Maintainer: Julien Nicoulaud <julien.nicoulaud@gmail.com>
# Source: https://github.com/nicoulaj/archlinux-packages
pkgname=mbeancmd
pkgver=2.2.2
pkgrel=5
pkgdesc="A command-line tool written in Java for interacting with MBeans on any J2EE server."
arch=(i686 x86_64)
url="http://wiki.jasmine.ow2.org/xwiki/bin/view/Documentation/MBeanCmd"
license=('LGPL2.1')
depends=(java-runtime)
changelog=Changelog
source=(http://search.maven.org/remotecontent?filepath=org/ow2/jasmine/$pkgname-assemblies-core/$pkgver/$pkgname-assemblies-core-$pkgver-bin.jar)
noextract=($pkgname-assemblies-core-$pkgver-bin.jar)
md5sums=('5b5cf0a8c575cd4e1926fb92c1459a40')

package() {

  msg2 "Install the library at /usr/share/java/${pkgname}..."
  install -Dm644 "${srcdir}/${pkgname}-assemblies-core-${pkgver}-bin.jar" "${pkgdir}/usr/share/java/${pkgname}/${pkgname}.jar"
  
  msg2 "Install an executable at /usr/bin/${pkgname}..."
  install -dm755 ${pkgdir}/usr/bin
  cat <<EOF > ${pkgdir}/usr/bin/${pkgname}
#!/bin/sh
"\$JAVA_HOME/bin/java" -jar '/usr/share/java/${pkgname}/${pkgname}.jar' "\$@"
EOF
  chmod 755 "${pkgdir}/usr/bin/${pkgname}"

}

# vim:set ts=2 sw=2 et:
