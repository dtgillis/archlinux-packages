# Maintainer: Julien Nicoulaud <julien.nicoulaud@gmail.com>
# Source: https://github.com/nicoulaj/archlinux-packages
pkgname=hda-jack-retask-bzr
pkgver=6
pkgrel=1
pkgdesc="Retask your jack plugs (eg. turn your microphone jack plug into a headphone one)."
arch=('x86' 'x86_64')
url="https://code.launchpad.net/~diwic/+junk/hda-jack-retask"
license=(GPL2)
depends=(gtk3)
makedepends=(bzr)
changelog=Changelog

_bzrtrunk="https://code.launchpad.net/~diwic/+junk/hda-jack-retask"
_bzrmod="hda-jack-retask"

build() {
  cd "${srcdir}"
  
  msg2 "Connecting to Bazaar server and checking out..."
  if [ -d ${_bzrmod} ] ; then
  	cd ${_bzrmod} && bzr --no-plugins pull ${_bzrtrunk} -q -r ${pkgver}
  	msg2 "Local files are up to date."
  else
  	bzr --no-plugins branch ${_bzrtrunk} ${_bzrmod} -q -r ${pkgver}
  fi
  msg2 "Bazaar checkout done or server timeout."

  msg2 "Building..."
  cd "${srcdir}/${_bzrmod}"
  make
}

package() {
  cd "${srcdir}/${_bzrmod}"
  make install DESTDIR="${pkgdir}"
}
